package memo;


import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.SQLException;
import java.util.ArrayList;

//데이터를 저장하는 저장소를 관리하는 객체
	public class ModelWithDB {
		
		private final String URL = "jdbc:mysql://localhost:3306/memo";
		private final String ID = "root";
		private final String PW = "1231";
		
		Connection con = null;
		
		// 생성자
		public ModelWithDB(){
			
			// 특정 컴퓨터를 찾기위한 주소 체계
			// 아이피 = 213.12.123.132
			// url = naver.com
			// 특정 프로그램에 할당되는 번지
			// port = 1 ~ 6만번대..
			//        2000번대 밑은 이미 표준으로 사용되고 있다.
			
			// 소켓
			// 아이피 + 포트
			
			
			// 표준 프로토콜
			//http:// 아이피(주소) : 포트(80)
			
			// 특정 프로그램에 액세스 하기위한 주소체계
			//프로토콜이름://아이피(주소) : 포트
			try {
				Class.forName("com.mysql.jdbc.Driver"); //드라이버를 동적으로 로드
			} catch (ClassNotFoundException e) {
				e.printStackTrace();
			}
		}
		
		// 쓰기
		public void create(Memo memo){
			
			// 1. 데이터베이스 연결
			try (Connection con = DriverManager.getConnection(URL, ID, PW);) {
			
			
				// 2. 쿼리를 실행
				// 2.1 쿼리 생성
				String query = "insert into memo(name,content,datetime)"
							 + "values(?,?,?)";
				
				// 2.2 쿼리를 실행 가능한 상태로 만들어준다
				PreparedStatement pstmt = con.prepareStatement(query);
				
				// 2.3 물음표에 값을 세팅
				pstmt.setString(1, memo.name);
				pstmt.setString(2, memo.content);
				pstmt.setDate(3, new Date(System.currentTimeMillis()));
				
			} catch (Exception e) {
				System.out.println("접속오류");
				e.printStackTrace();
			}
			
			// 3. 데이터베이스 연결해제
		}
		// 읽기
		public Memo read(int no){
			Memo memo = new Memo();
			return memo;
		}
		// 수정
		public void update(Memo memo){
			
		}
		// 삭제
		public void delete(int no){
			
		}
		// 목록
		public ArrayList<Memo> getList(){
			ArrayList<Memo> list = new ArrayList<>();
			
			return list;
		}
	}